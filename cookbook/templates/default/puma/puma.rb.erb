<%
  min_threads = @min_thread_count  ||= 5
  max_threads = @min_thread_count  ||= 5
%>

threads <%= min_threads %>, <%= max_threads %>

port <%= @proxy_port %>

environment "<%= @rails_env %>"

workers  1

pidfile "<%= @puma_pid %>"

state_path "<%= @puma_state %>"

stdout_redirect "<%= @puma_log %>", "<%= @puma_error_log %>", true

on_restart do
  puts '==> Restarting Puma!'
end

on_worker_boot do
  puts '==> Starting Puma Worker!'
end

plugin :tmp_restart