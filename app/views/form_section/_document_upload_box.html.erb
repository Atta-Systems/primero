<%
  documents = formObject["other_documents"] || []
  documents = documents.select { |document| document["file_name"].present? && document["attachment_key"].present? }
%>
<div class="row">
  <p>
    <%= I18n.t("fields.document_upload_box.file_restrictions_message") %>
  </p>
</div>
<% if documents.present? && !formObject.new_record?%>
  <% documents.each do |document| %>
    <div class="row">
      <div class="medium-4 columns">
        <span class="tool-tip-label">
          <%= label_tag I18n.t(document_upload_box.name, :default => document_upload_box.display_name) %>
        </span>
      </div>
      <div class="medium-8 columns">
        <div>
          <span><%= document["file_name"] %></span>
        </div>
      </div>
      <div class="medium-4 columns">
        <label class="key">Document Description</label>
      </div>
      <div class="medium-8 columns">
        <% value = document["document_description"] || "" %>
        <span class="value"><%= value %></span>
        <div>
          <% checkbox_id = "delete_#{formObject.class.name.underscore.downcase}_document_#{document["attachment_key"]}" %>
          <%= check_box_tag("delete_#{formObject.class.name.underscore.downcase}_document[#{document["attachment_key"]}]", :id => checkbox_id) %>
          <%= label_tag checkbox_id, t("#{formObject.class.name.underscore.downcase}.actions.delete_document") %>
        </div>
      </div>
    </div>
  <% end %>
<% end %>
<div id="file_container">
  <div id="file-group">
    <div class="file">
      <div class="row">
        <div class="medium-4 columns">
          <span class="tool-tip-label">
            <%= label_tag "#{formObject.class.name.underscore.downcase}[upload_document][0][document]", "Add Document", :class=>'key inline' %>
          </span>
        </div>
        <div class="medium-8 columns">
          <%= file_field_tag "#{formObject.class.name.underscore.downcase}[upload_document][0][document]", :id => "#{formObject.class.name.underscore.downcase}_upload_document_0_document" %>
          <%= image_tag "new/icon_help.png", title: document_upload_box.help_text, class: 'tool-tip-icon vtip' if document_upload_box.help_text.present? %>
        </div>
      </div>
      <div class="row">
        <div class="medium-4 columns">
          <span class="tool-tip-label">
            <%= label_tag "#{formObject.class.name.underscore.downcase}[upload_document][0][document_description]", "Document Description", :class=>'key inline' %>
          </span>
        </div>
        <div class="medium-8 columns">
          <%= text_field_tag "#{formObject.class.name.underscore.downcase}[upload_document][0][document_description]", "", :id => "#{formObject.class.name.underscore.downcase}_upload_document_0_document_description" %>
        </div>
      </div>
    </div>
  </div>
  <div id="document_upload_box_file_extension_popup_message" title="PRIMERO" style="display:none">
    <p><%= I18n.t("errors.models.child.document_format") %></p>
    <button type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" onclick="$(this).parent().parent().remove();">
    <span class="ui-button-text"><%= I18n.t("cases.ok") %></span>
    </button>
  </div>
  <div id="document_upload_box_file_size_popup_message" title="PRIMERO" style="display:none">
    <p><%= I18n.t("errors.models.child.document_size") %></p>
    <button type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" onclick="$(this).parent().parent().remove();">
    <span class="ui-button-text"><%= I18n.t("cases.ok") %></span>
    </button>
  </div>
  <div class="row">
    <div class="large-12 columns">
      <%= link_to 'Add another document', '', id: 'add-document', class: 'green-button right' %>
    </div>
  </div>
</div>
