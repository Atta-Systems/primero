<% content_for :breadcrumbs do %>
  <%= t("roles.view") %> (<%= @role.name %>)
<% end %>

<% content_for :record_sub_nav do %>
  <% if can? :update, @role %>
    <a class="btn green-button" href="<%= edit_role_path @role %>">
      <span class="edit"><%= t("buttons.edit") %></span>
    </a>
  <% end %>
  <%#= render partial: 'exports/button', locals: {model: Role, instance: @role} %>
<% end %>

<div class="page-content-new row collapse" data-equalizer>
  <div class="medium-4 large-4 columns close-side-tab side-tab-container">
    <%= render :partial => 'shared/side_tab', :locals => {:highlight_page => 'roles'} %>
  </div>
  <div class="medium-8 large-8 columns side-tab-content-container">
    <div class="side-tab-content" data-equalizer-watch>
      <div class="row">
        <div class="large-12 columns">
          <%= form_for @role, :html => {:class => ''} do |f| %>
              <%= error_messages_for :role %>
              <fieldset class="no-border">
                <div class="row">
                  <div class="medium-4 columns">
                    <%= f.label :name, t("name"), :class=>'key'  %>
                  </div>
                  <div class="medium-8 columns">
                    <span class="value"><%= @role.name %></span>
                  </div>
                </div>
                <div class="row">
                  <div class="medium-4 columns">
                    <%= f.label :description, t("description"), :class=>'key'  %>
                  </div>
                  <div class="medium-8 columns">
                    <%= @role.description %>
                  </div>
                </div>
                <div class="row">
                  <div class="medium-4 columns">
                    <%= f.label :permissions, t("permissions.label"), :class=>'key'  %>
                  </div>
                  <div class="medium-8 columns">
                    <span class="value value_form">
                      <% translated_permissions.each do |group_name, permissions| %>
                          <span class="section section-show">
                            <span class="title"><%= t("permissions.#{group_name}") %></span>
                            <% Hash[*permissions.flatten].values.each do |permission| %>
                              <label><%= f.check_box :permissions, {:id => permission.dehumanize, :name => "role[permissions][]", :disabled => "disabled"}, permission, "" %>
                                <%= t("permissions.permission.#{permission}") %></label>
                              <% end %>
                          </span>
                      <% end %>
                    </span>
                  </div>
                </div>

                <div class="row">
                  <div class="medium-4 columns">
                    <%= f.label :permitted_form_ids, t("forms.label"), :class=>'key'  %>
                  </div>
                  <div class="medium-8 columns">
                    <span class="value value_form">
                      <%  @forms_by_record_type.each do |record_type, forms_list| %>
                          <span class="section section-show">
                            <span class="title"><%= t("forms.record_types.#{record_type}") %></span>
                            <% forms_list.each do |form| %>
                              <label><%= f.check_box :permitted_form_ids, {:id => "role_#{form.unique_id}", :name => "role[permitted_form_ids][]", disabled: "disabled"}, form.unique_id, "" %>
                              <%= form.name %></label>
                            <% end %>
                          </span>
                      <% end %>
                    </span>
                  </div>
                </div>
              </fieldset>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
