<div class="row">
  <%
     subform = field
     subform_section = field.subform_section
     number_of_subforms = subforms_count formObject, subform, form_group_name
     subform_object = get_subform_object formObject, subform_section, form_group_name
     collapsed_fields = subform_section.collapsed_list
  %>
  <h5 class="tool-tip-label">
    <span><%= label_tag subform.name, t(subform.name, :default => subform.display_name), :class=>'key' %></span>
  </h5>
  <div class="subforms">
    <% (number_of_subforms).times do |i| %>
      <%
        formObject_i = subform_object["#{i}"]
        formObject_i[:hidden_name] = formObject.hidden_name
      %>
      <div id="subform_container_<%= subform.name %>_<%= i %>" class="subform_container">
        <fieldset id="subform_<%= subform.name %>_<%= i %>" class="<%= subform.name %> subform no-border">
        <%= render partial: "form_section/subform_expand_collapse_header",
                   object: formObject,
                   locals: { formObject: formObject,
                             subform: subform,
                             collapsed_fields: collapsed_fields,
                             i: i,
                             form_group_name: form_group_name,
                             view_mode: true
                           }
        %>
        <% (subform_section.fields.select {|field| field.visible? }).each do |field| %>
          <% unless field.display_type == 'hidden' %>
            <%= render :partial => "form_section/field_display_#{field.display_type}",  :locals=>{:field => field, :formObject=>formObject_i} %>
          <% end %>
        <% end %>
        </fieldset>
      </div>
    <% end %>
  </div>
</div>
